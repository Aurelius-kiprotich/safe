<%- include('partials/header') %>
<%- include('partials/nav') %>

<main id="results" class="container">
        <h1>You score <%= results.results %></h1>

        <% questions.forEach(question =>{ %>
            <div class="question">
                <h1><%= question.question %></h1>
                <div>
                    <% if (question.choices) { %>
                        <% try { %>
                            <% JSON.parse(question.choices).forEach(choice => { %>
                                <!-- Your code for rendering each choice -->
                                <% if (choice=== question.answer) {%>
                                    <p class ="choice correct-answer"><%= choice %></p>
                                 <% } else  (JSON.parse(results.response).includes(choice) && choice !== question.answer) { %>
                                        <p class ="choice wrong-answer"><%= choice %></p>
                                 <% }%>
                            <% }); %>
                        <% } catch (error) { %>
                            <!-- Handle JSON parsing error -->
                            <p>Error parsing choices</p>
                        <% } %>
                    <% } else { %>
                        <!-- Handle case where question.choices is null or undefined -->
                        <p>No choices available</p>
                    <% } %>
                    
                </div>
            </div>
        <%})%>

</main>

<%- include('partials/footer') %>
